<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <title data-i18n="BN_Page_Title">CineTicket ‚Ä¢ B∆∞·ªõc 3: Ch·ªçn b·∫Øp n∆∞·ªõc</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- CSS n·ªÅn chung -->
    <link rel="stylesheet" href="../../assets/css/Phim.css" />

    <style>
      /* ========= FIX HEADER gi·ªëng trang CH·ªåN GH·∫æ ========= */
      :root {
        --header-h: 72px;
        --buy: #22e3a2;
        --buy-2: #12c48b;
        --border: rgba(255, 255, 255, 0.12);
      }
      html {
        scroll-padding-top: var(--header-h);
      }
      .site-header {
        position: sticky;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background: rgba(0, 0, 0, 0.9);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      }
      .site-header .nav.container {
        margin: 0 !important;
        max-width: 100% !important;
        width: 100% !important;
        padding-inline: clamp(14px, 4vw, 28px) !important;
        height: var(--header-h);
        min-height: var(--header-h);
      }
      .site-header .nav.shell {
        display: flex;
        align-items: center;
        justify-content: space-between;
        column-gap: 24px;
        height: var(--header-h);
        min-height: var(--header-h);
        max-width: 100%;
        width: 100%;
        padding-inline: clamp(14px, 4vw, 28px);
      }
      #header-spacer {
        height: 0 !important;
      }
      .site-header .nav-links {
        overflow: visible !important;
      }

      /* ========= STYLE RI√äNG TRANG COMBO ========= */
      .container {
        max-width: 1100px;
        margin: 24px auto 42px;
        padding: 0 18px;
      }
      .card {
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 16px;
        backdrop-filter: blur(12px);
      }
      .header-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 16px;
      }
      .header-row h2 {
        margin: 0;
        font-size: 1.8rem;
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: #1a2336;
        color: #fff;
        text-decoration: none;
        cursor: pointer;
        transition: background 0.15s, transform 0.12s, border-color 0.15s,
          box-shadow 0.15s;
      }
      .btn:hover {
        background: #24304b;
        transform: translateY(-1px);
        border-color: #2e3f60;
      }
      .btn.primary {
        border: none;
        background: var(--buy);
        color: #0b1b14;
        font-weight: 700;
      }
      .btn.primary:hover {
        background: var(--buy-2);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
      }
      .btn[disabled] {
        opacity: 0.6;
        pointer-events: none;
      }

      .note {
        color: #cbd5e1;
      }
      .loading {
        opacity: 0.85;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 120px;
      }

      .bn-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 14px;
      }
      .bn {
        border: 1px dashed rgba(255, 255, 255, 0.22);
        border-radius: 14px;
        padding: 12px;
        display: grid;
        grid-template-columns: 84px 1fr;
        gap: 12px;
        align-items: start;
      }
      .bn .thumb {
        width: 84px;
        height: 84px;
        border-radius: 10px;
        background: #0b0b12 center/cover no-repeat;
        border: 1px solid var(--border);
      }
      .bn .name {
        font-weight: 800;
        margin-bottom: 4px;
      }
      .bn .desc {
        color: #cbd5e1;
        font-size: 0.92rem;
        line-height: 1.35;
        margin-bottom: 8px;
      }
      .bn .price {
        color: #dbeafe;
        margin: 4px 0 10px;
        font-weight: 600;
      }
      .bn .ctrl {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .qty {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 6px;
        position: relative;
      }
      .qty-btn {
        width: 32px;
        height: 32px;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: #1a2336;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        cursor: pointer;
        transition: 0.15s;
      }
      .qty-btn:hover {
        background: #24304b;
        transform: translateY(-1px);
        border-color: #2e3f60;
      }
      .qty .qty-value {
        min-width: 28px;
        text-align: center;
        font-weight: 700;
      }
      .qty input[type="number"] {
        position: absolute;
        width: 1px;
        height: 1px;
        overflow: hidden;
        clip: rect(0 0 0 0);
        clip-path: inset(50%);
        white-space: nowrap;
        border: 0;
        padding: 0;
        margin: -1px;
      }

      .summary {
        margin-top: 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .summary .total {
        font-weight: 800;
      }
      .actions {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        flex-wrap: wrap;
      }
    </style>
  </head>

  <body>
    <!-- include header -->
    <div id="include-header"></div>

    <main>
      <div class="container">
        <div class="header-row">
          <h2 data-i18n="BN_Heading">üçø B∆∞·ªõc 3: Ch·ªçn b·∫Øp n∆∞·ªõc</h2>
        </div>

        <div class="card">
          <div id="bnList" class="bn-grid">
            <div class="loading" data-i18n="BN_Loading_Combos">
              ƒêang t·∫£i combo‚Ä¶
            </div>
          </div>
          <div class="summary">
            <div class="note" id="summaryText" data-i18n="BN_Summary_None">
              Ch∆∞a ch·ªçn combo n√†o
            </div>
            <div class="total">
              <span data-i18n="BN_Total_Label">T·ªïng combo</span>:
              <span id="comboTotal">0ƒë</span>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 12px">
          <div class="actions">
            <a class="btn" href="select-seats.html" data-i18n="Btn_Back"
              >Quay l·∫°i</a
            >
            <a
              id="nextBtn"
              class="btn primary"
              href="checkout.html"
              data-i18n="BN_Next_Checkout"
              >Ti·∫øp ‚Äî Thanh to√°n</a
            >
          </div>
        </div>
      </div>
    </main>

    <!-- include footer -->
    <div id="include-footer"></div>

    <!-- Auth/shared -->
    <script>
      window.__PAGE_ROLE__ = "select-combo";
    </script>
    <script defer src="../../assets/js/login.js"></script>

    <!-- PAGE SCRIPT -->
    <script>
      /* ========= Config ========= */
      const BASE_URL = "https://localhost:7058";
      const $ = (s, r = document) => r.querySelector(s);

      // chu·∫©n ho√° ·∫£nh gi·ªëng Admin
      const absUrl = (u) => {
        if (!u) return "";
        if (/^https?:\/\//i.test(u)) return u;
        const clean = String(u).replace(/^\/?wwwroot\//i, "");
        return `${BASE_URL.replace(/\/+$/, "")}/${clean.replace(/^\/+/, "")}`;
      };
      const numberVN = (n) => {
        try {
          return Number(n).toLocaleString("vi-VN");
        } catch {
          return n;
        }
      };

      async function getJson(url, opt = {}) {
        const res = await fetch(url, opt);
        let d = null;
        try {
          d = await res.json();
        } catch {}
        if (!res.ok || d?.status === false)
          throw new Error(d?.message || `HTTP ${res.status}`);
        return d;
      }

      /* ========= I18N ========= */
      const CULT = { vi: "vi", en: "en", fr: "fr" };
      let curAlias = localStorage.getItem("lang") || "vi";
      const I18N_CACHE = {};

      async function i18nLoad(alias) {
        const a = CULT[alias] ? alias : "vi";
        if (I18N_CACHE[a]) return I18N_CACHE[a];
        try {
          const url = new URL(`${BASE_URL}/api/i18n`);
          url.searchParams.set("lang", a);
          url.searchParams.set("_", Date.now());
          const res = await fetch(url, {
            credentials: "include",
            cache: "no-store",
          });
          const dict = res.ok ? await res.json() : {};
          I18N_CACHE[a] = dict && typeof dict === "object" ? dict : {};
        } catch {
          I18N_CACHE[a] = {};
        }
        return I18N_CACHE[a];
      }
      function t(key) {
        const pack = I18N_CACHE[curAlias] || {};
        const v = pack[key];
        return typeof v === "string" ? v : key;
      }
      function tt(key, params = {}) {
        return (t(key) || key).replace(/\{(\w+)\}/g, (_, k) =>
          params[k] != null ? String(params[k]) : `{${k}}`
        );
      }
      function applyI18nToDom(root = document) {
        root.querySelectorAll("[data-i18n]").forEach((el) => {
          el.textContent = t(el.getAttribute("data-i18n"));
        });
        const titleEl = document.querySelector("title[data-i18n]");
        if (titleEl) document.title = t(titleEl.getAttribute("data-i18n"));
        document.documentElement.lang = curAlias;
      }
      const PRICE_FALLBACK = { vi: "Gi√°", en: "Price", fr: "Prix" };
      function priceLabelText() {
        const raw = (I18N_CACHE[curAlias] || {})["BN_Price_Label"];
        if (typeof raw === "string") {
          const s = raw.toLowerCase();
          if (/thanh to√°n|checkout|paiement/.test(s))
            return PRICE_FALLBACK[curAlias] || PRICE_FALLBACK.vi;
          return raw;
        }
        return PRICE_FALLBACK[curAlias] || PRICE_FALLBACK.vi;
      }
      async function setLang(alias) {
        curAlias = CULT[alias] ? alias : "vi";
        localStorage.setItem("lang", curAlias);
        try {
          await fetch(
            `${BASE_URL}/api/ping?lang=${encodeURIComponent(
              curAlias
            )}&t=${Date.now()}`,
            { credentials: "include", cache: "no-store" }
          );
        } catch {}
        await i18nLoad(curAlias);
        applyI18nToDom(document);
        const u = new URL(location.href);
        u.searchParams.set("lang", curAlias);
        history.replaceState({}, "", u.toString());
        rerenderDynamicTextsAfterLang();
        initCombo();
      }
      document.addEventListener("click", (e) => {
        const langLink = e.target.closest("[data-set-lang]");
        if (!langLink) return;
        e.preventDefault();
        setLang(langLink.getAttribute("data-set-lang"));
      });

      /* ========= include header/footer ========= */
      async function includeHTML(id, file) {
        try {
          const html = await fetch(`${file}?t=${Date.now()}`, {
            cache: "no-store",
          }).then((r) => r.text());
          const host = document.getElementById(id);
          if (host) host.innerHTML = html;
          applyI18nToDom(host || document);
          if (
            id === "include-header" &&
            typeof updateAuthButtons === "function"
          )
            setTimeout(updateAuthButtons, 80);
        } catch (e) {
          console.error("includeHTML error:", e);
        }
      }

      /* ========= Booking flow (localStorage) ========= */
      const LS_KEY = "BOOKING_FLOW";
      const getFlow = () => {
        try {
          return JSON.parse(localStorage.getItem(LS_KEY) || "{}");
        } catch {
          return {};
        }
      };
      const setFlow = (p) => {
        const cur = getFlow();
        localStorage.setItem(LS_KEY, JSON.stringify({ ...cur, ...(p || {}) }));
      };
      const clearFlow = () => {
        try {
          localStorage.removeItem(LS_KEY);
        } catch {}
      };

      // Map { maBn -> qty } kh√¥i ph·ª•c t·ª´ localStorage
      function getSavedComboMap() {
        const f = getFlow();
        const arr = Array.isArray(f?.comboItems) ? f.comboItems : [];
        const map = new Map();
        for (const it of arr) {
          const id = Number(it.maBn);
          const q = Number(it.qty || 0);
          if (id && q > 0) map.set(id, q);
        }
        return map;
      }

      // Ch·ªâ clear flow khi click nav-link ·ªü header (tr·ª´ Ng√¥n ng·ªØ)
      function bindHeaderNavFlowClear() {
        const host = document.getElementById("include-header");
        if (!host) return;
        host.addEventListener(
          "click",
          (e) => {
            const el = e.target.closest("a,button");
            if (!el) return;
            if (el.matches(".dropdown-toggle,[data-set-lang]")) return; // b·ªè qua Ng√¥n ng·ªØ
            if (!el.closest(".site-header")) return; // ch·ªâ trong header
            if (e.ctrlKey || e.metaKey || e.shiftKey || e.button === 1) return; // m·ªü tab m·ªõi th√¨ b·ªè qua
            clearFlow(); // üëâ clear to√†n b·ªô BOOKING_FLOW
          },
          true
        );
      }

      /* ========== STRICT FLOW GUARD cho combo (ch·ªâ l∆∞u khi Back/Next) ========== */
      let PENDING_COMBO = { items: [], total: 0 };
      let FLOW_EXIT_ALLOWLIST = false; // true ch·ªâ khi r·ªùi trang b·∫±ng select-seats ho·∫∑c checkout

      function savePendingCombosToLS() {
        const f = getFlow();
        const seatSubtotal = Number(f?.seatTotal ?? 0);
        const comboTotal = Number(PENDING_COMBO?.total ?? 0);
        localStorage.setItem(
          LS_KEY,
          JSON.stringify({
            ...f,
            comboItems: PENDING_COMBO.items,
            comboTotal: PENDING_COMBO.total,
            tempTotal: seatSubtotal + comboTotal,
          })
        );
      }
      function purgeCombosFromLS() {
        const f = getFlow();
        if (!f) return;
        delete f.comboItems;
        delete f.comboTotal;
        delete f.tempTotal;
        localStorage.setItem(LS_KEY, JSON.stringify(f));
      }

      /* ========= Combos API (latest-wins + AbortController) ========= */
      let COMBO_CTRL = null,
        COMBO_REQ_VER = 0;
      const langHeaders = () => ({ "Accept-Language": curAlias });
      function combosUrl() {
        const url = new URL(`${BASE_URL}/api/bapnuoc/get-all`);
        url.searchParams.set("lang", curAlias);
        url.searchParams.set("_", Date.now());
        return url.toString();
      }
      function showLoading() {
        $(
          "#bnList"
        ).innerHTML = `<div class="loading" data-i18n="BN_Loading_Combos">${t(
          "BN_Loading_Combos"
        )}</div>`;
      }

      function renderList(list) {
        const host = $("#bnList");
        host.innerHTML = "";
        if (!list.length) {
          host.innerHTML = `<div class="note" data-i18n="BN_Empty_List">${t(
            "BN_Empty_List"
          )}</div>`;
          return;
        }

        // üîÅ Kh√¥i ph·ª•c s·ªë l∆∞·ª£ng ƒë√£ l∆∞u
        const savedMap = getSavedComboMap();

        list.forEach((b) => {
          const name = b.tenBn || `Combo #${b.maBn}`;
          const price = parseInt(b.gia || 0, 10) || 0;
          const desc = b.moTa || "";
          const img =
            absUrl(b.hinhAnhUrl) || "../../assets/images/default-poster.jpg";
          const init = savedMap.get(Number(b.maBn)) || 0;

          const el = document.createElement("div");
          el.className = "bn";
          el.innerHTML = `
            <div class="thumb" style="background-image:url('${img}')" aria-label="${name}"></div>
            <div>
              <div class="name"></div>
              <div class="desc"></div>
              <div class="price"><span class="price-label"></span>: <span class="price-val"></span></div>
              <div class="ctrl">
                <div class="qty" data-id="${b.maBn}">
                  <button type="button" class="qty-btn btn-dec" aria-label="${t(
                    "Qty_Decrease_Aria"
                  )}">‚àí</button>
                  <span class="qty-value">${init}</span>
                  <button type="button" class="qty-btn btn-inc" aria-label="${t(
                    "Qty_Increase_Aria"
                  )}">+</button>
                  <input type="number" min="0" step="1" value="${init}" />
                </div>
              </div>
            </div>`;
          el.querySelector(".name").textContent = name;
          el.querySelector(".desc").textContent = desc;
          el.querySelector(".price-label").textContent = priceLabelText();
          el.querySelector(".price-val").textContent = `${numberVN(price)}ƒë`;

          const box = el.querySelector(".qty");
          const minus = box.querySelector(".btn-dec");
          const plus = box.querySelector(".btn-inc");
          const val = box.querySelector(".qty-value");
          const input = box.querySelector("input");
          const setQty = (q) => {
            const v = Math.max(0, q | 0);
            val.textContent = v;
            input.value = v;
            commitSelection(host, list);
          };
          minus.addEventListener("click", () =>
            setQty((parseInt(input.value || "0", 10) || 0) - 1)
          );
          plus.addEventListener("click", () =>
            setQty((parseInt(input.value || "0", 10) || 0) + 1)
          );
          input.addEventListener("input", () =>
            setQty(parseInt(input.value || "0", 10) || 0)
          );

          host.appendChild(el);
        });

        commitSelection(host, list);
      }

      function lineFormat(name, qty) {
        return tt("BN_ItemLine_Format", { name, qty });
      }

      function commitSelection(host, list) {
        const items = [...host.querySelectorAll(".bn")]
          .map((el, i) => {
            const qty =
              parseInt(el.querySelector(".qty input").value || "0", 10) || 0;
            return {
              maBn: list[i].maBn,
              qty,
              gia: list[i].gia,
              tenBn: list[i].tenBn,
              moTa: list[i].moTa,
              hinhAnhUrl: list[i].hinhAnhUrl,
            };
          })
          .filter((x) => x.qty > 0);

        const total = items.reduce(
          (t, x) => t + x.qty * (parseInt(x.gia || 0, 10) || 0),
          0
        );

        // üîí Kh√¥ng ghi v√†o LS t·∫°i ƒë√¢y ‚Äî ch·ªâ gi·ªØ t·∫°m
        PENDING_COMBO = { items, total };

        const summaryEl = $("#summaryText");
        if (items.length) {
          summaryEl.removeAttribute("data-i18n");
          summaryEl.textContent = items
            .map((x) => lineFormat(x.tenBn || "Combo #" + x.maBn, x.qty))
            .join(" ‚Ä¢ ");
        } else {
          summaryEl.setAttribute("data-i18n", "BN_Summary_None");
          summaryEl.textContent = t("BN_Summary_None");
        }
        $("#comboTotal").textContent = numberVN(total) + "ƒë";
      }

      async function initCombo() {
        if (COMBO_CTRL)
          try {
            COMBO_CTRL.abort();
          } catch {}
        COMBO_CTRL = new AbortController();
        const myVer = ++COMBO_REQ_VER;

        showLoading();
        try {
          const res = await getJson(combosUrl(), {
            headers: { ...langHeaders() },
            cache: "no-store",
            signal: COMBO_CTRL.signal,
          });
          if (myVer !== COMBO_REQ_VER) return;
          const list = Array.isArray(res?.data)
            ? res.data
            : Array.isArray(res)
            ? res
            : [];
          renderList(list);
        } catch (e) {
          if (e?.name === "AbortError") return;
          console.error(e);
          $(
            "#bnList"
          ).innerHTML = `<div class="loading" data-i18n="BN_Fetch_Failed">${t(
            "BN_Fetch_Failed"
          )}</div>`;
        }
      }

      function rerenderDynamicTextsAfterLang() {
        applyI18nToDom(document);
        document.querySelectorAll(".bn").forEach((el) => {
          const priceLabel = el.querySelector(".price-label");
          if (priceLabel) priceLabel.textContent = priceLabelText();
          const dec = el.querySelector(".btn-dec");
          const inc = el.querySelector(".btn-inc");
          if (dec) dec.setAttribute("aria-label", t("Qty_Decrease_Aria"));
          if (inc) inc.setAttribute("aria-label", t("Qty_Increase_Aria"));
        });
        const summaryEl = $("#summaryText");
        if (
          summaryEl &&
          (summaryEl.dataset.i18n === "BN_Summary_None" ||
            !summaryEl.textContent.trim())
        ) {
          summaryEl.textContent = t("BN_Summary_None");
        }
      }

      /* ========= Boot ========= */
      document.addEventListener("DOMContentLoaded", async () => {
        // ƒë·ªçc lang t·ª´ URL n·∫øu c√≥
        const langQ = new URLSearchParams(location.search).get("lang");
        if (CULT[langQ]) localStorage.setItem("lang", langQ);
        const cur = localStorage.getItem("lang") || "vi";
        if (cur !== curAlias) curAlias = cur;

        await i18nLoad(curAlias);
        applyI18nToDom(document);

        /* üî• N·∫øu quay v·ªÅ t·ª´ checkout.html ‚Üí X√ìA TO√ÄN B·ªò FLOW */
        const fromCheckout = (() => {
          try {
            const refUrl = new URL(document.referrer || "", location.href);
            const refFull =
              (refUrl.pathname || "") +
              (refUrl.search || "") +
              (refUrl.hash || "");
            return /\/checkout\.html(\?|#|$)/i.test(refFull);
          } catch {
            return /checkout\.html/i.test(document.referrer || "");
          }
        })();
        if (fromCheckout) {
          clearFlow(); // gi·ªØ ƒë√∫ng y√™u c·∫ßu: v·ªÅ t·ª´ checkout l√† wipe s·∫°ch
        }

        await includeHTML("include-header", "../../part/header.html");
        await includeHTML("include-footer", "../../part/footer.html");

        // Sau khi header render ‚Üí bind clear flow cho nav-link (tr·ª´ Ng√¥n ng·ªØ)
        bindHeaderNavFlowClear();

        // b·∫Øt bu·ªôc ƒë√£ ch·ªçn gh·∫ø tr∆∞·ªõc ƒë√≥
        const f = getFlow();
        const seatCount = Array.isArray(f?.seatLabels)
          ? f.seatLabels.length
          : 0;
        if (!seatCount) {
          alert(t("BN_Alert_NoSeats"));
          location.href = "select-seats.html";
          return;
        }

        // ‚ùå B·ªé vi·ªác "purgeCombosFromLS()" khi v√†o trang,
        // ƒë·ªÉ c√≥ th·ªÉ kh√¥i ph·ª•c s·ªë combo ƒë√£ l∆∞u (n·∫øu c√≥).

        // init combos theo ng√¥n ng·ªØ
        initCombo();

        // ‚ÄúTi·∫øp ‚Äî Thanh to√°n‚Äù: cho ph√©p gi·ªØ + l∆∞u combo v√†o LS r·ªìi ƒëi checkout
        $("#nextBtn").addEventListener("click", () => {
          FLOW_EXIT_ALLOWLIST = true;
          savePendingCombosToLS();
        });

        // ‚ÄúQuay l·∫°i ch·ªçn gh·∫ø‚Äù: cho ph√©p gi·ªØ + l∆∞u combo v√†o LS r·ªìi ƒëi
        const backToSeats = document.querySelector(
          'a[href$="select-seats.html"]'
        );
        if (backToSeats) {
          backToSeats.addEventListener(
            "click",
            () => {
              FLOW_EXIT_ALLOWLIST = true;
              savePendingCombosToLS();
            },
            { capture: true }
          );
        }

        // Link kh√°c b·∫•t k·ª≥ ‚Üí xo√° combo ngay (kh√¥ng xo√° to√†n flow)
        document.addEventListener(
          "click",
          (e) => {
            const a = e.target.closest("a[href]");
            if (!a) return;
            const href = a.getAttribute("href") || "";
            const allowed =
              /select-seats\.html(\?|#|$)/i.test(href) ||
              /checkout\.html(\?|#|$)/i.test(href);
            if (!allowed) {
              FLOW_EXIT_ALLOWLIST = false;
              purgeCombosFromLS();
            }
          },
          { capture: true }
        );

        // Reload/close m√† kh√¥ng ƒëi theo 2 h∆∞·ªõng h·ª£p l·ªá ‚Üí xo√° combo t·∫°m
        window.addEventListener("beforeunload", () => {
          if (!FLOW_EXIT_ALLOWLIST) purgeCombosFromLS();
        });
      });
    </script>
  </body>
</html>
